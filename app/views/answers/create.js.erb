var $form = $('#new_answer'),
    $alert = $form.find('.alert-danger');
    $alert.remove();

<% if @answer.errors.any? %>
    <% if remotipart_submitted? %>
      $form.prepend('<%= j "#{render 'shared/errors_messages', resource: @answer}" %>');
    <% else %>
      $form.prepend('<%= j render 'shared/errors_messages', resource: @answer %>');
    <% end %>
<% else %>
    <% if remotipart_submitted? %>
      $('.answers-list').append('<%= j "#{render @answer}" %>');
    <% else %>
      $('.answers-list').append('<%= j render @answer %>');
    <% end %>

    $form.find('input, textarea').val('');
    $form.find('.nested-fields').not(':last').remove();
<% end %>